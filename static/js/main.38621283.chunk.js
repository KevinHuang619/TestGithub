(window.webpackJsonpjsx=window.webpackJsonpjsx||[]).push([[0],{45:function(e,t,a){e.exports=a(82)},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(9),l=a.n(s),o=(a(50),a(22)),r=a(13),c=a(14),m=a(18),u=a(15),d=a(17),p=a(4),h=a.n(p),f=(a(51),a(52),a(87)),g=a(88),E=a(84),b=a(89),v=a(90),y=a(83),x=a(91),C=a(93),w=a(85),S=a(86),k=a(92),M=a(19),_=a.n(M),j=a(16),N=a(12),O=a.n(N),A=a(20),P=_.a.create({baseURL:"https://api.unsplash.com",headers:{Authorization:"Client-ID 34e39e5c2f447ce52009a515846ca2b6ccc35552bb63de59cf4a6d06728f3f7e"}}),D=function(e){return function(){var t=Object(A.a)(O.a.mark(function t(a){var n;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.get("/search/photos",{params:{query:e}});case 2:n=t.sent,console.log("action!"),a({type:"FETCH_POSTS",payload:n.data.results});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},R=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={term:""},a.onFormSubmit=function(e){e.preventDefault(),console.log("Submit!"),a.props.fetchPosts(a.state.term)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log("init sb")}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.onFormSubmit},i.a.createElement("div",null,i.a.createElement("label",null,"Image Search"),i.a.createElement("input",{type:"text",value:this.state.term,onChange:function(t){return e.setState({term:t.target.value})}}))))}}]),t}(i.a.Component),z=(Object(j.b)(function(e){return console.log("SearchBar mapState"),console.log(e),{imgs:e.imgs}},{fetchPosts:D})(R),756),L=z/16*9,T=z/1.68,B=L/1.68,I=13,W=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={showMediaModal:!0,isEditing:!1,texts:a.props.scene.text,placements:a.props.scene.placements},a.setup=function(){var e=a.props.scene,t=e.medias[e.selected_media_index],n=t.is_video?a.refs.s_v:a.refs.s_img;n.src=t.url;var i=a.state.texts,s=i.map(function(e,t){return a.refs[t].getContext("2d")});s.forEach(function(e,t,a){e.clearRect(0,0,z,L)});n.addEventListener(t.is_video?"loadeddata":"load",function e(){var l=t.is_video?n.clientWidth:n.naturalWidth,o=t.is_video?n.clientHeight:n.naturalHeight,r=Math.max(T/l,B/o);s.forEach(function(e,t,s){e.drawImage(n,(l-T/r)/2,(o-B/r)/2,T/r,B/r,0,0,T,B),e.fillStyle="RGBA(0,0,0,0.2)",e.fillRect(0,0,T,B),a.state.isEditing||(e.font=1===a.props.text_style?"bold "+I+"pt Open Sans":I+"pt Russo One",H(e,i[t].split("english"===a.props.language?" ":""),1,a.props.text_style,a.props.language,a.state.placements[t],!0))}),n.removeEventListener(t.is_video?"loadeddata":"load",e)})},a.toggleMediaModal=function(e){a.setState({showMediaModal:!a.state.showMediaModal})},a.onMediaSelected=function(e){a.setState({showMediaModal:!1}),a.props.onMediaChange(a.props.scene,e)},a.onEditText=function(){a.setState({isEditing:!0}),a.setup()},a.onChangePlacement=function(e,t){a.setState(function(a){return{placements:a.placements.map(function(a,n){return n===e?t+"-"+a.split("-")[1]:a})}}),a.setup()},a.onConfirmText=function(){a.props.onTextChange(a.props.scene,a.state.texts,a.state.placements),a.setState({isEditing:!1}),a.setup()},a.onChangeText=function(e,t){var n=t.target.value;a.setState(function(t){return{texts:t.texts.map(function(t,a){return a===e?n:t})}})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.showMediaModal!==t.showMediaModal||this.state.isEditing!==t.isEditing||this.state.texts!==t.texts||this.state.placements!==t.placements||this.props.scenes!==e.scenes||this.props.scene!==e.scene||this.props.text_style!==e.text_style||this.props.language!==e.language||this.props.index!==e.index}},{key:"componentWillReceiveProps",value:function(e){e.scene.text!==this.state.texts&&this.setState({texts:e.scene.text}),e.scene.placements!==this.state.placements&&this.setState({placements:e.scene.placements})}},{key:"componentDidUpdate",value:function(e,t){this.setup()}},{key:"componentDidMount",value:function(){this.setup()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginBottom:"30px"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",marginRight:"10px"}},i.a.createElement("div",null,i.a.createElement(y.a,{disabled:0===this.props.index||this.state.isEditing,onClick:function(){return e.props.onRearrange(e.props.scene,!0)},className:"btn-round btn-icon animation-on-hover"},i.a.createElement("i",{className:"tim-icons icon-minimal-up"}))),this.props.scene.position+1,i.a.createElement("div",null,i.a.createElement(y.a,{disabled:this.props.index===this.props.scenes.length-1||this.state.isEditing,onClick:function(){return e.props.onRearrange(e.props.scene,!1)},className:"btn-round btn-icon animation-on-hover"},i.a.createElement("i",{className:"tim-icons icon-minimal-down"}))),i.a.createElement(y.a,{onClick:function(){return e.props.onRemoveScene(e.props.scene)},disabled:this.state.isEditing,color:"danger",className:"btn-icon animation-on-hover"},i.a.createElement("i",{className:"tim-icons icon-trash-simple"}))),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},this.state.texts.map(function(t,a){var n=e.state.placements[a].split("-")[0];return i.a.createElement("div",{key:"sc_"+a,style:{position:"relative"}},i.a.createElement("canvas",{width:z/1.68,height:L/1.68,id:a,ref:a}),i.a.createElement(E.a,{style:{position:"absolute",top:20,left:20,display:e.state.isEditing?"block":"none"}},i.a.createElement("textarea",{style:{width:T-40,height:B-60,backgroundColor:"rgba(0,0,0,0.3)",textAlign:{alignment:n}},ref:"text_edit",onChange:function(t){return e.onChangeText(a,t)},value:t,className:"form-control"}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement(y.a,{onClick:function(){return e.onChangePlacement(a,"left")},color:"left"===n?"":"success",size:"sm"},"left"),i.a.createElement(y.a,{onClick:function(){return e.onChangePlacement(a,"center")},color:"center"===n?"":"success",size:"sm"},"center"),i.a.createElement(y.a,{onClick:function(){return e.onChangePlacement(a,"right")},color:"right"===n?"":"success",size:"sm"},"right"))))})),i.a.createElement("video",{id:"s_v",ref:"s_v",style:{visibility:"hidden",position:"absolute"},controls:!0,loop:!0}),i.a.createElement("img",{id:"s_img",ref:"s_img",style:{visibility:"hidden",position:"absolute"},alt:""}),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:"10px"}},i.a.createElement("input",{type:"number",value:this.props.scene.duration,onChange:function(t){return e.props.onDurationChange(e.props.scene,t)},min:"1",max:"100",className:"form-control"}),"second(s)",i.a.createElement("br",null),i.a.createElement(y.a,{ref:"media_btn",onClick:this.toggleMediaModal,disabled:this.state.isEditing,style:{marginLeft:"4px"},color:"primary",className:"btn-icon animation-on-hover"},i.a.createElement("i",{className:"tim-icons icon-image-02"})),i.a.createElement(y.a,{onClick:this.onEditText,style:{display:this.state.isEditing?"none":"block"},color:"primary",className:"btn-round btn-icon animation-on-hover"},i.a.createElement("i",{className:"tim-icons icon-pencil"})),i.a.createElement(y.a,{onClick:this.onConfirmText,style:{display:this.state.isEditing?"block":"none"},color:"primary",className:"btn-round btn-icon animation-on-hover"},i.a.createElement("i",{className:"tim-icons icon-check-2"}))),i.a.createElement(C.a,{isOpen:this.state.showMediaModal,toggle:this.toggleMediaModal,size:"lg"},i.a.createElement(w.a,{className:"justify-content-center",toggle:this.toggleMediaModal},"Media"),i.a.createElement(S.a,{className:"justify-content-center"},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",flexWrap:"wrap"}},this.props.scene.medias.map(function(t,a){return t.is_video?i.a.createElement("div",{key:a+"_media",style:{margin:"10px",display:"flex",flexDirection:"column",justifyContent:"center"}},i.a.createElement("video",{src:t.url,controls:!0,width:z/1.68/2,height:L/1.68/2},i.a.createElement("source",{src:t.url})),i.a.createElement(y.a,{size:"sm",onClick:function(){return e.onMediaSelected(a)}},"Select")):i.a.createElement("div",{key:a+"_media",style:{margin:"10px",display:"flex",flexDirection:"column",justifyContent:"center"}},i.a.createElement("img",{src:t.url,width:z/1.68/2,height:L/1.68/2,alt:"thumbnail"}),i.a.createElement(y.a,{size:"sm",onClick:function(){return e.onMediaSelected(a)}},"Select"))})))))}}]),t}(n.Component),H=function(e,t,a,n,i,s,l){var o,r,c,m=l?I:21.84,u=l?24:40.32,d=l?T:z,p=l?B:L,h=u+m,f=d-2*u-d/4,g=m+m,E="",b=0,v=h,y=l?4/1.68:4,x=l?10/1.68:10;switch(s){case"left-top":r="left",c=(o=u)-x;break;case"center-top":r="center",o=d/2;break;case"right-top":r="right",c=(o=d-u)+x}e.shadowColor="rgba(0,0,0,0.3)",e.shadowBlur=4;for(var C=0,w=0;w<t.length;w++){var S="english"===i?" ":"",k=E+t[w]+S;if((_=e.measureText(k).width)>f&&w>0)e.fillStyle="RGBA(255,255,255,"+a+")",e.textAlign=r,e.fillText(E,o,h),b+=1,E=t[w]+S,h+=g;else if(E=k,C=Math.max(_,C),2===n){var M=0;switch(e.fillStyle="#000",r){case"left":M=u-3;break;case"center":M=(d-_)/2;break;case"right":M=d-_-u}e.fillRect(M,h-m-4,_*a+4,m+10)}}var _=e.measureText(E).width;if(2===n){M=0;switch(e.fillStyle="#000",r){case"left":M=u-3;break;case"center":M=(d-_)/2-4;break;case"right":M=d-_-u-4}e.fillRect(M,h-m-4,_*a+4,m+10)}if(e.fillStyle="RGBA(255,255,255,"+a+")",e.textAlign=r,e.fillText(E,o,h),C=Math.max(_,C),1===n){p=(b+=1)*g-m/2;e.fillStyle="#ffff66","center"!==r?e.fillRect(c,v-m,y,p*a):e.fillRect((d-C)/2,u-10,C*a,y)}},F=W,G=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={bigChartData:"data1",language:"english",text_style:1,music:0,scenePlaytime:0,fullPlaytime:0,isDisablePlay:!1,showPreviewModal:!1,isLoadingApi:!1,text_display:i.a.createElement("div",null),scenes:[],audios:["https://storage.googleapis.com/lumen5-prod-audio/gothic-30z1OCWHSO4wee111gPGbe.mp3","https://storage.googleapis.com/lumen5-prod-audio/holly-in-the-snowfkRwixHOarpzLAwFBzLc.mp3","https://storage.googleapis.com/lumen5-prod-audio/home-at-last-is-she-thereM1kcjgrdLu2mk3e2ED3s.mp3","https://storage.googleapis.com/lumen5-prod-audio/bnm-0715-rubber-trees-fullB5W821PYiWsd.mp3","https://storage.googleapis.com/lumen5-prod-audio/netherworld30GyArwSSgBpNeoDx8RH6.mp3"]},a.setBgChartData=function(e){a.setState({bigChartData:e})},a.doSerialize=function(e){return{position:0,duration:10,text:[a.refs.title_article.value],placements:["center-top"],selected_media_index:0,medias:e.imgs.map(function(e){return{is_video:!1,url:e.urls.regular}})}},a.onApiCall=function(){a.refs.title_article.value;var e=a.refs.text_article.value,t=a.refs.url_article.value;a.refs.limit_article.value;if(""!==e||""!==t){a.setState({isLoadingApi:!0,text_display:e}),a.props.fetchPosts(e)}},a.toMMSS=function(e){var t=parseInt(e,10),a=Math.floor(t/60),n=t-60*a;return a<10&&(a="0"+a),n<10&&(n="0"+n),a+":"+n},a.onRemoveScene=function(e){a.setState(function(t){return{scenes:t.scenes.filter(function(t){return t.position!==e.position})}})},a.onDurationChange=function(e,t){var n=Object(o.a)(a.state.scenes);n[e.position].duration=Number(t.target.value),a.setState({scenes:n})},a.onTextChange=function(e,t,n){var i=Object(o.a)(a.state.scenes);i[e.position].text=t,i[e.position].placements=n,a.setState({scenes:i})},a.onMediaChange=function(e,t){var n=Object(o.a)(a.state.scenes);n[e.position].selected_media_index=t,a.setState({scenes:n})},a.onRearrange=function(e,t){var n=t?e.position-1:e.position+1,i=e.position,s=[];a.state.scenes.forEach(function(t){t.position===n?t.position=i:t.position===e.position&&(t.position=n),s.push(t)}),s=s.sort(function(e,t){var a=e.position,n=t.position,i=0;return a>n?i=1:a<n&&(i=-1),i}),a.setState({scenes:s})},a.onLanguageChanged=function(e){a.setState({language:e})},a.onStyleChanged=function(e){a.setState({text_style:e})},a.onMusicChanged=function(e){var t=e.target.value;a.setState({music:parseInt(t)})},a.togglePreviewModal=function(e){a.doStop(),a.setState({showPreviewModal:!a.state.showPreviewModal})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){console.log("233"),console.log(e);var t=this.doSerialize(e);console.log(t),this.setState({scenes:[t]}),this.setState({isLoadingApi:!1})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App",style:{margin:"16px"}},i.a.createElement("div",{style:{left:0,width:"40%",height:"100%",position:"fixed",zIndex:1,top:0,overflowX:"hidden",padding:"16px",boxShadow:"0 0 0 0 black, 0 0 10px 0 black",backgroundColor:"rgba(255,255,255,0.03)"}},i.a.createElement(f.a,null,i.a.createElement(g.a,{style:{textAlign:"justify"}},i.a.createElement("span",{style:{color:"white"}},this.state.text_display))),i.a.createElement(E.a,null,i.a.createElement("input",{ref:"title_article",type:"text",className:"form-control",placeholder:"Paste title here"}),i.a.createElement(f.a,null,i.a.createElement(g.a,{style:{textAlign:"justify"}},i.a.createElement("span",{style:{color:"white"}},i.a.createElement("textarea",{ref:"text_article",rows:"50",cols:"60",placeholder:"Paste article text here(eg: children play basketball)",className:"form-control"})))),"or",i.a.createElement("br",null),i.a.createElement("input",{ref:"url_article",type:"text",className:"form-control",placeholder:"Paste article url here (eg. http://www.article.com)"}),i.a.createElement("br",null),i.a.createElement("input",{ref:"limit_article",type:"number",className:"form-control",defaultValue:"3",placeholder:"Limit no."})),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(E.a,null,i.a.createElement(b.a,null,"Music:"),i.a.createElement(v.a,{type:"select",name:"select",id:"music_selection"},i.a.createElement("option",{value:"0"},"Music 1"),i.a.createElement("option",{value:"1"},"Music 2"),i.a.createElement("option",{value:"2"},"Music 3"),i.a.createElement("option",{value:"3"},"Music 4"),i.a.createElement("option",{value:"4"},"Music 5"))),i.a.createElement("br",null),i.a.createElement(y.a,{onClick:this.onApiCall,color:"primary",className:"animation-on-hover",disabled:this.state.isLoadingApi},this.state.isLoadingApi?"Loading...":"Submit"),i.a.createElement("br",null),i.a.createElement("div",{style:{bottom:"0px"}},i.a.createElement(x.a,{className:"btn-group-toggle float-right","data-toggle":"buttons"},i.a.createElement(y.a,{tag:"label",color:"info",id:"0",size:"sm",className:h()("btn-simple",{active:"data1"===this.state.bigChartData}),onClick:function(){return e.setBgChartData("data1")}},i.a.createElement("input",{defaultChecked:!0,className:"d-none",name:"options",type:"radio"}),i.a.createElement("span",{className:"d-none d-sm-block d-md-block d-lg-block d-xl-block"},"English"),i.a.createElement("span",{className:"d-block d-sm-none"},i.a.createElement("i",{className:"tim-icons icon-single-02"}))),i.a.createElement(y.a,{color:"info",id:"1",size:"sm",tag:"label",className:h()("btn-simple",{active:"data2"===this.state.bigChartData}),onClick:function(){return e.setBgChartData("data2")}},i.a.createElement("input",{className:"d-none",name:"options",type:"radio"}),i.a.createElement("span",{className:"d-none d-sm-block d-md-block d-lg-block d-xl-block"},"Chinese"),i.a.createElement("span",{className:"d-block d-sm-none"},i.a.createElement("i",{className:"tim-icons icon-gift-2"}))))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null)),i.a.createElement("div",{style:{right:0,width:"60%",height:"100%",position:"fixed",zIndex:1,top:0,overflowX:"hidden",margin:"16px",textAlign:"center"}},i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",null,this.state.scenes.map(function(t,a){return i.a.createElement(F,{key:a,scenes:e.state.scenes,scene:t,index:a,language:e.state.language,text_style:e.state.text_style,onRearrange:e.onRearrange,onRemoveScene:e.onRemoveScene,onDurationChange:e.onDurationChange,onMediaChange:e.onMediaChange,onTextChange:e.onTextChange})})),i.a.createElement("br",null)," ",i.a.createElement("br",null)),i.a.createElement("div",{style:{backgroundColor:"rgba(0,0,0,0.7)",top:0,left:0,height:"100%",width:"100%",position:"absolute",zIndex:1,overflow:"hidden",textAlign:"center",display:this.state.showPreviewModal||this.state.isLoadingApi?"block":"none"}}),i.a.createElement(C.a,{isOpen:this.state.showPreviewModal,style:{overflow:"hidden",textAlign:"center"},size:"lg"},i.a.createElement(w.a,{className:"justify-content-center"},"Preview"),i.a.createElement(S.a,{className:"justify-content-center"},i.a.createElement("p",{style:{textAlign:"right"}},"(",this.toMMSS(this.state.scenePlaytime),")"),i.a.createElement("canvas",{id:"c",ref:"c",width:756,height:425.25,style:{backgroundColor:"#dfdfdf"}}),i.a.createElement("p",{style:{textAlign:"right"}},this.toMMSS(this.state.fullPlaytime)+"/"+this.toMMSS(this.state.scenes.reduce(function(e,t){return e+(t.duration||0)},0))),i.a.createElement("br",null),i.a.createElement("video",{id:"v",ref:"v",style:{visibility:"hidden",position:"absolute",backgroundColor:"#dfdfdf"},controls:!0,loop:!0}),i.a.createElement("img",{id:"img",ref:"img",style:{visibility:"hidden",position:"absolute"},alt:""}),i.a.createElement("audio",{id:"m",ref:"m"})),i.a.createElement(k.a,{className:"justify-content-center"},i.a.createElement(y.a,{ref:"play_btn",onClick:this.playAllScened,color:"primary",className:"btn-icon animation-on-hover",disabled:this.state.isDisablePlay},i.a.createElement("i",{className:"tim-icons icon-triangle-right-17"})))),i.a.createElement(C.a,{isOpen:this.state.isLoadingApi,size:"sm"},i.a.createElement(S.a,{className:"justify-content-center"},i.a.createElement("p",null,"loading..."))))}}]),t}(n.Component),U=Object(j.b)(function(e){return console.log("Dashbaord mapState"),{imgs:e.imgs}},{fetchPosts:D})(G);var q=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(U,null))},J=a(11),X=Object(J.c)({imgs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POSTS":return t.payload;default:return e}}}),V=a(43),Y=Object(J.d)(X,Object(J.a)(V.a));l.a.render(i.a.createElement(j.a,{store:Y},i.a.createElement(q,null)),document.querySelector("#root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.38621283.chunk.js.map